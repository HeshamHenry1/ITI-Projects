# نظام إدارة الصيدلية - التوثيق الشامل

## نظرة عامة على النظام

تم تطوير نظام إدارة الصيدلية لتلبية احتياجات الصيادلة والأطباء في البحث عن الأدوية وإدارة المخزون. يوفر النظام ميزتين رئيسيتين:

1. **البحث بـ QR Code**: يمكن للدكتور مسح رمز QR للحصول على تفاصيل العلاج كاملة
2. **البحث بالاسم الجزئي**: البحث عن الأدوية باستخدام جزء من اسم الدواء

## المميزات الرئيسية

### 1. البحث بـ QR Code
- مسح رمز QR للدواء للحصول على المعلومات الكاملة
- عرض تفاصيل شاملة تشمل:
  - اسم الدواء التجاري والعلمي
  - المادة الفعالة والتركيز
  - الشكل الدوائي
  - التخصص العلاجي
  - الشركة المصنعة
  - السعر والكمية المتوفرة
  - الموقع في الصيدلية
  - تاريخ انتهاء الصلاحية
  - البدائل المتاحة

### 2. البحث بالاسم الجزئي
- البحث باستخدام جزء من اسم الدواء (تجاري أو علمي)
- عرض جميع الأدوية التي تحتوي على الكلمة المبحوث عنها
- نفس التفاصيل الشاملة لكل دواء

### 3. واجهة مستخدم متقدمة
- تصميم عصري وسهل الاستخدام
- دعم اللغة العربية بالكامل
- عرض النتائج في بطاقات منظمة
- ألوان مميزة للحالات المختلفة (مخزون منخفض، أسعار، إلخ)

## التقنيات المستخدمة

### الواجهة الخلفية (Backend)
- **Flask**: إطار عمل Python للتطبيقات الويب
- **SQLAlchemy**: مكتبة ORM لإدارة قاعدة البيانات
- **SQLite**: قاعدة بيانات خفيفة ومحمولة
- **Flask-CORS**: لدعم الطلبات من مصادر مختلفة

### الواجهة الأمامية (Frontend)
- **React**: مكتبة JavaScript لبناء واجهات المستخدم
- **Tailwind CSS**: إطار عمل CSS للتصميم
- **shadcn/ui**: مكونات UI جاهزة ومتقدمة
- **Lucide Icons**: مجموعة أيقونات حديثة

## هيكل قاعدة البيانات

### الجداول الرئيسية

#### 1. جدول الأدوية (medications)
```sql
- medication_id: المعرف الفريد للدواء
- generic_name: الاسم العلمي
- brand_name: الاسم التجاري
- active_ingredient: المادة الفعالة
- concentration: التركيز
- dosage_form: الشكل الدوائي
- price: السعر
- quantity_in_stock: الكمية المتوفرة
- location_in_pharmacy: الموقع في الصيدلية
- qr_code: رمز QR فريد
- expiry_date: تاريخ انتهاء الصلاحية
```

#### 2. جدول التخصصات العلاجية (therapeutic_categories)
```sql
- category_id: المعرف الفريد
- category_name: اسم التخصص
- description: وصف التخصص
```

#### 3. جدول الشركات المصنعة (manufacturers)
```sql
- manufacturer_id: المعرف الفريد
- manufacturer_name: اسم الشركة
- country: البلد
- contact_info: معلومات الاتصال
```

#### 4. جدول البدائل (medication_alternatives)
```sql
- alternative_id: المعرف الفريد
- original_medication_id: الدواء الأصلي
- alternative_medication_id: الدواء البديل
- notes: ملاحظات
```

#### 5. جدول الأطباء (doctors)
```sql
- doctor_id: المعرف الفريد
- doctor_name: اسم الطبيب
- specialization: التخصص
- license_number: رقم الترخيص
- phone: رقم الهاتف
- email: البريد الإلكتروني
```

#### 6. جدول الوصفات الطبية (prescriptions)
```sql
- prescription_id: المعرف الفريد
- doctor_id: معرف الطبيب
- patient_name: اسم المريض
- patient_phone: هاتف المريض
- prescription_date: تاريخ الوصفة
- notes: ملاحظات
- qr_code: رمز QR للوصفة
```

#### 7. جدول تفاصيل الوصفة (prescription_details)
```sql
- detail_id: المعرف الفريد
- prescription_id: معرف الوصفة
- medication_id: معرف الدواء
- quantity_prescribed: الكمية الموصوفة
- dosage_instructions: تعليمات الجرعة
- duration_days: مدة العلاج بالأيام
```

## API Endpoints

### 1. البحث بـ QR Code
```
GET /api/search/qr/{qr_code}
```
**الوصف**: البحث عن دواء باستخدام رمز QR

**مثال**:
```
GET /api/search/qr/QR001
```

### 2. البحث بالاسم الجزئي
```
GET /api/search/name?q={search_term}
```
**الوصف**: البحث عن الأدوية باستخدام جزء من الاسم

**مثال**:
```
GET /api/search/name?q=Panadol
```

### 3. الحصول على جميع الأدوية
```
GET /api/medications
```
**الوصف**: الحصول على قائمة بجميع الأدوية المتوفرة

## تشغيل النظام

### متطلبات النظام
- Python 3.11+
- Node.js 20+
- pnpm أو npm

### خطوات التشغيل

#### 1. تشغيل الواجهة الخلفية
```bash
cd pharmacy_backend
source venv/bin/activate
python src/main.py
```

#### 2. بناء الواجهة الأمامية
```bash
cd pharmacy_frontend
pnpm install
pnpm run build
```

#### 3. نسخ الملفات المبنية
```bash
cp -r pharmacy_frontend/dist/* pharmacy_backend/src/static/
```

#### 4. الوصول للنظام
افتح المتصفح وانتقل إلى: `http://localhost:5000`

## البيانات التجريبية

يحتوي النظام على بيانات تجريبية تشمل:

### الأدوية المتوفرة
1. **Panadol** (QR001) - مسكن للألم
2. **Amoxil** (QR002) - مضاد حيوي
3. **Losec** (QR003) - لعلاج الجهاز الهضمي
4. **Ventolin** (QR004) - لعلاج الجهاز التنفسي
5. **Norvasc** (QR005) - لعلاج القلب والأوعية الدموية
6. **Brufen** (QR006) - مسكن للألم
7. **Cipro** (QR007) - مضاد حيوي
8. **Claritine** (QR008) - لعلاج الحساسية
9. **Glucophage** (QR009) - لعلاج السكري
10. **Voltaren** (QR010) - مسكن للألم

### التخصصات العلاجية
- مسكنات الألم
- مضادات حيوية
- أدوية الجهاز الهضمي
- أدوية الجهاز التنفسي
- أدوية القلب والأوعية الدموية

### الشركات المصنعة
- Pfizer (أمريكا)
- Novartis (سويسرا)
- Bayer (ألمانيا)
- Sanofi (فرنسا)
- EVA Pharma (مصر)

## اختبار النظام

### اختبار البحث بالاسم
1. اختر "البحث بالاسم"
2. أدخل "Panadol" أو "Pan" أو أي جزء من اسم الدواء
3. اضغط "بحث"
4. ستظهر النتائج مع جميع التفاصيل

### اختبار البحث بـ QR
1. اختر "البحث برمز QR"
2. أدخل "QR002" أو أي رمز QR آخر
3. اضغط "بحث"
4. ستظهر تفاصيل الدواء المحدد

## الميزات المتقدمة

### 1. عرض البدائل
- يعرض النظام البدائل المتاحة لكل دواء
- يساعد الصيدلي في اقتراح بدائل عند عدم توفر الدواء الأصلي

### 2. إدارة المخزون
- عرض الكمية المتوفرة لكل دواء
- تمييز الأدوية قليلة المخزون بألوان تحذيرية

### 3. معلومات الموقع
- عرض موقع الدواء في الصيدلية
- يساعد في العثور على الدواء بسرعة

### 4. تواريخ الصلاحية
- عرض تاريخ انتهاء صلاحية كل دواء
- يساعد في إدارة المخزون وتجنب الأدوية المنتهية الصلاحية

## التطوير المستقبلي

### ميزات مقترحة
1. **إدارة المبيعات**: تسجيل عمليات البيع والفواتير
2. **تقارير المخزون**: تقارير تفصيلية عن حالة المخزون
3. **تنبيهات الصلاحية**: تنبيهات للأدوية قاربة على الانتهاء
4. **إدارة الموردين**: معلومات الموردين وأسعارهم
5. **نظام نقاط البيع**: واجهة كاملة لنقاط البيع
6. **تطبيق موبايل**: تطبيق للهواتف الذكية
7. **قارئ QR متقدم**: استخدام كاميرا الجهاز لقراءة QR

### تحسينات تقنية
1. **قاعدة بيانات أكبر**: الانتقال إلى PostgreSQL أو MySQL
2. **أمان محسن**: نظام مصادقة وتفويض
3. **نسخ احتياطية**: نظام نسخ احتياطية تلقائية
4. **مراقبة الأداء**: أدوات مراقبة وتحليل الأداء

## الخلاصة

تم تطوير نظام إدارة الصيدلية بنجاح ليوفر حلاً شاملاً لإدارة الأدوية والبحث عنها. النظام يدعم البحث بـ QR Code والبحث بالاسم الجزئي مع عرض تفاصيل شاملة لكل دواء. الواجهة سهلة الاستخدام وتدعم اللغة العربية بالكامل، مما يجعلها مناسبة للاستخدام في الصيدليات العربية.

النظام قابل للتطوير والتوسع، ويمكن إضافة المزيد من الميزات حسب احتياجات المستخدمين.

